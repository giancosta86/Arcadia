---
layout: null
---

{% assign sectionCodes =
    site.data.sections
    | map: 'code'
%}


{% for post in posts %}
    {% for postSection in post.sections %}

        {% unless sectionCodes contains postSection %}
            {% include UNREGISTERED_SECTION %}
        {% endunless %}

    {% endfor %}
{% endfor %}


[
    {% for section in site.data.sections %}

    {
        "code": "{{ section.code }}",
        "title": "{{ section.title }}",
        "posts": [
            {% assign sectionPosts =
                site.posts
                | where_exp:
                    "post",
                    "post.sections contains section.code"
            %}

            {% for sectionPost in sectionPosts %}
                "{{ sectionPost.title }}"

                {% unless forloop.last %},{% endunless %}
            {% endfor %}
        ]
    }

    {% unless forloop.last %},{% endunless %}
    {% endfor %}
]